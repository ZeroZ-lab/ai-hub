# Module 4.2 - SKILL.md 编写与使用示例

> **学习目标**：掌握 SKILL.md 的编写规范，并在 Claude Agent SDK 中启用技能。

## 示例：代码审查 Skill

### 1) 创建技能文件
目录结构：
```
.claude/skills/code_reviewer/SKILL.md
```

`SKILL.md` 示例：
```markdown
---
name: code-reviewer
description: Review code changes and report bugs, regressions, and missing tests.
tools:
  - Read
  - Bash
---

# Code Reviewer Skill

## When to use
- User asks for a code review, PR review, or asks to find bugs/regressions.

## Workflow
1. Identify files in scope (diff or file list).
2. Read relevant files and focus on correctness and risk.
3. Report issues with severity and file/line references.
4. Suggest tests or checks.

## Output format
- Findings (ordered by severity)
- Questions/assumptions
- Suggested tests
```

### 2) SDK 中启用 Skills

```python
from claude_agent_sdk import ClaudeSDKClient, ClaudeAgentOptions

options = ClaudeAgentOptions(
    setting_sources=["user", "project"],
    allowed_tools=["Skill", "Read", "Bash"],
)

client = ClaudeSDKClient(options=options)
```

### 3) 调用示例

```python
prompt = "请帮我 review src/payment.py，关注正确性和异常处理。"
await client.query(prompt=prompt)
```

如果 `description` 与请求高度匹配，Skill 会自动触发。

---

## 示例：限制输出格式

在 Skill 中强制结构化输出：

```markdown
## Output format
Findings:
- [Severity] file.py:line - issue summary

Questions:
- ...

Suggested tests:
- ...
```

这种结构化格式便于审查结果落地为 PR 评论或任务列表。

---

## 目录结构建议

```
project_01_code_reviewer/
├── .claude/skills/code_reviewer/SKILL.md
├── src/
│   └── payment.py
└── README.md
```

---

## 练习

1. 创建自己的 `SKILL.md` 并调整触发描述
2. 使用 `setting_sources=["project"]` 限定仅启用项目技能
3. 尝试让 Skill 输出检查清单或测试建议
