# Smart Assistant - æ™ºèƒ½å¯¹è¯åŠ©æ‰‹

> **éš¾åº¦**: ğŸŒŸğŸŒŸ ä¸­çº§
> **é¢„è®¡æ—¶é—´**: 1-2 å°æ—¶

---

## é¡¹ç›®èƒŒæ™¯

åœ¨å®Œæˆäº† Project 01 åï¼Œä½ å·²ç»æŒæ¡äº†åŸºæœ¬çš„ Claude API è°ƒç”¨ã€‚ç°åœ¨æˆ‘ä»¬è¦æ„å»ºä¸€ä¸ª**æ›´æ™ºèƒ½çš„å¯¹è¯åŠ©æ‰‹**ï¼Œå®ƒèƒ½ï¼š
- è®°ä½å¯¹è¯å†å²
- æ”¯æŒå¤šç§åŠ©æ‰‹æ¨¡å¼
- ç®¡ç†å¯¹è¯çŠ¶æ€
- å¯¼å‡ºå¯¹è¯è®°å½•

**ç¤ºä¾‹åœºæ™¯**ï¼š
> ä½ éœ€è¦ä¸€ä¸ª AI åŠ©æ‰‹ï¼Œå¸®ä½ è¿›è¡ŒæŠ€æœ¯è®¨è®ºã€åˆ›æ„å†™ä½œæˆ–æ—¥å¸¸é—²èŠã€‚å®ƒèƒ½è®°ä½ä½ ä»¬çš„å¯¹è¯å†…å®¹ï¼Œå¹¶åœ¨ä¸åŒåœºæ™¯ä¸‹åˆ‡æ¢ä¸åŒçš„"äººæ ¼"ã€‚

---

## å­¦ä¹ ç›®æ ‡

å®Œæˆæœ¬é¡¹ç›®åï¼Œä½ å°†èƒ½å¤Ÿï¼š
- [ ] å®ç°å¤šè½®å¯¹è¯çš„ä¸Šä¸‹æ–‡ç®¡ç†
- [ ] ä½¿ç”¨ System Prompt æ§åˆ¶ AI è¡Œä¸º
- [ ] ç®¡ç†å¯¹è¯å†å²å’Œ Token æ¶ˆè€—
- [ ] å®ç°å‘½ä»¤ç³»ç»Ÿå’ŒçŠ¶æ€ç®¡ç†
- [ ] å¯¼å‡ºå’Œä¿å­˜å¯¹è¯è®°å½•

---

## åŠŸèƒ½éœ€æ±‚

### å¿…åšåŠŸèƒ½ (Core)

#### 1. å¤šè½®å¯¹è¯
- è¾“å…¥ï¼šç”¨æˆ·æ¶ˆæ¯
- è¾“å‡ºï¼šAI å“åº”ï¼ˆå¸¦ä¸Šä¸‹æ–‡ï¼‰
- ç¤ºä¾‹ï¼š
  ```
  ä½ : æˆ‘å–œæ¬¢ Python
  AI: å¾ˆå¥½çš„é€‰æ‹©ï¼Python ç®€æ´ä¼˜é›…...

  ä½ : å®ƒæœ‰ä»€ä¹ˆä¼˜ç‚¹ï¼Ÿ
  AI: åŸºäºä½ æåˆ°å–œæ¬¢ Pythonï¼Œå®ƒçš„ä¼˜ç‚¹åŒ…æ‹¬...  # è®°ä½äº†ä¸Šæ–‡
  ```

#### 2. åŠ©æ‰‹æ¨¡å¼åˆ‡æ¢
- æ”¯æŒ 3 ç§æ¨¡å¼ï¼š
  - **å‹å¥½æ¨¡å¼**ï¼šè½»æ¾èŠå¤©ï¼Œåƒæœ‹å‹
  - **æŠ€æœ¯æ¨¡å¼**ï¼šä¸“ä¸šä¸¥è°¨ï¼ŒæŠ€æœ¯è®¨è®º
  - **åˆ›æ„æ¨¡å¼**ï¼šå¤©é©¬è¡Œç©ºï¼Œå¤´è„‘é£æš´
- ç¤ºä¾‹ï¼š
  ```
  ä½ : /mode tech
  AI: å·²åˆ‡æ¢åˆ°æŠ€æœ¯åŠ©æ‰‹æ¨¡å¼ ğŸ”§

  ä½ : è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯é—­åŒ…
  AI: ä»æŠ€æœ¯è§’åº¦æ¥è¯´ï¼Œé—­åŒ…æ˜¯æŒ‡...  # æŠ€æœ¯é£æ ¼
  ```

#### 3. å¯¹è¯ç®¡ç†å‘½ä»¤
- `/reset` - æ¸…ç©ºå¯¹è¯å†å²
- `/history` - æŸ¥çœ‹å¯¹è¯è®°å½•
- `/mode [friendly|tech|creative]` - åˆ‡æ¢æ¨¡å¼
- `/save` - ä¿å­˜å¯¹è¯åˆ°æ–‡ä»¶
- `/help` - æ˜¾ç¤ºå¸®åŠ©

#### 4. Token ä½¿ç”¨ç»Ÿè®¡
- å®æ—¶æ˜¾ç¤º Token æ¶ˆè€—
- ç´¯è®¡ç»Ÿè®¡
- æˆæœ¬ä¼°ç®—

### é€‰åšåŠŸèƒ½ (Advanced)

- [ ] **è¿›é˜¶ 1**ï¼šæ”¯æŒå¯¹è¯æ‘˜è¦ï¼ˆå½“å†å²è¿‡é•¿æ—¶ï¼‰
- [ ] **è¿›é˜¶ 2**ï¼šæ”¯æŒä»æ–‡ä»¶åŠ è½½å†å²å¯¹è¯
- [ ] **è¿›é˜¶ 3**ï¼šå¤šä¼šè¯ç®¡ç†ï¼ˆä¿å­˜å¤šä¸ªå¯¹è¯ï¼‰
- [ ] **è¿›é˜¶ 4**ï¼šè¯­éŸ³è¾“å…¥/è¾“å‡ºï¼ˆä½¿ç”¨ TTSï¼‰

---

## æŠ€æœ¯è¦ç‚¹

### æ ¸å¿ƒæ¦‚å¿µ
- **System Prompt**ï¼šå®šä¹‰ AI çš„è§’è‰²å’Œè¡Œä¸º
- **å¯¹è¯å†å²ç®¡ç†**ï¼šæ§åˆ¶ä¸Šä¸‹æ–‡é•¿åº¦
- **çŠ¶æ€ç®¡ç†**ï¼šåˆ‡æ¢ä¸åŒæ¨¡å¼
- **æ–‡ä»¶ I/O**ï¼šä¿å­˜å’ŒåŠ è½½å¯¹è¯

### ä½¿ç”¨çš„ API
```python
# å¸¦ System Prompt çš„è°ƒç”¨
client.messages.create(
    model="claude-3-5-sonnet-20241022",
    max_tokens=1024,
    system="ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„åŠ©æ‰‹...",  # å…³é”®ï¼
    messages=[...]
)
```

### æ³¨æ„äº‹é¡¹
âš ï¸ **é‡ç‚¹**ï¼š
1. å¯¹è¯å†å²ä¼šå¿«é€Ÿæ¶ˆè€— Token
2. éœ€è¦å®ç°å†å²é•¿åº¦é™åˆ¶
3. System Prompt å½±å“ AI è¡Œä¸º
4. ä¿å­˜å¯¹è¯æ—¶æ³¨æ„éšç§

---

## å®ç°æ­¥éª¤

### å‡†å¤‡å·¥ä½œ

#### 1. ç¯å¢ƒé…ç½®
```bash
cd claude_agent_course/module_01_foundations/projects/project_02_smart_assistant

# åˆå§‹åŒ–é¡¹ç›®
uv init --no-readme

# å®‰è£…ä¾èµ–
uv add anthropic python-dotenv

# é…ç½® API Key
cp .env.example .env
# ç¼–è¾‘ .env
```

#### 2. é¡¹ç›®ç»“æ„
```
project_02_smart_assistant/
â”œâ”€â”€ README.md
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ .env.example
â”œâ”€â”€ .env
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py          # ä¸»ç¨‹åº
â”‚   â””â”€â”€ assistant.py     # Assistant ç±»
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ test_assistant.py
â”œâ”€â”€ data/                # ä¿å­˜å¯¹è¯è®°å½•
â”‚   â””â”€â”€ .gitkeep
â””â”€â”€ solution/
    â””â”€â”€ main.py
```

---

### ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ Assistant æ¨¡å¼

**ç›®æ ‡**ï¼šåˆ›å»ºä¸åŒçš„ System Prompt

**ä»»åŠ¡**ï¼š
åœ¨ `src/assistant.py` ä¸­å®šä¹‰ 3 ç§æ¨¡å¼çš„ System Prompt

**æç¤º**ï¼š
```python
MODES = {
    "friendly": {
        "name": "å‹å¥½åŠ©æ‰‹",
        "system_prompt": "ä½ æ˜¯ä¸€ä¸ªå‹å¥½ã€çƒ­æƒ…çš„ AI åŠ©æ‰‹...",
        "icon": "ğŸ˜Š"
    },
    "tech": {
        "name": "æŠ€æœ¯ä¸“å®¶",
        "system_prompt": "ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æŠ€æœ¯é¡¾é—®...",
        "icon": "ğŸ”§"
    },
    "creative": {
        "name": "åˆ›æ„ä¼™ä¼´",
        "system_prompt": "ä½ æ˜¯ä¸€ä¸ªå……æ»¡åˆ›æ„çš„å¤´è„‘é£æš´ä¼™ä¼´...",
        "icon": "ğŸ¨"
    }
}
```

---

### ç¬¬äºŒæ­¥ï¼šå®ç° SmartAssistant ç±»

**ç›®æ ‡**ï¼šåˆ›å»ºå¸¦çŠ¶æ€ç®¡ç†çš„ Assistant

**ä»»åŠ¡**ï¼š
1. åˆå§‹åŒ–å®¢æˆ·ç«¯
2. ç®¡ç†å½“å‰æ¨¡å¼
3. ç»´æŠ¤å¯¹è¯å†å²
4. å®ç° `chat()` æ–¹æ³•

**æç¤º**ï¼š
```python
class SmartAssistant:
    def __init__(self, mode="friendly", max_history=20):
        # TODO: åˆå§‹åŒ–
        self.mode = mode
        self.history = []
        self.max_history = max_history

    def chat(self, message: str) -> str:
        # TODO: 1. æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°å†å²
        # TODO: 2. è·å–å½“å‰æ¨¡å¼çš„ system prompt
        # TODO: 3. è°ƒç”¨ API
        # TODO: 4. ç®¡ç†å†å²é•¿åº¦
        pass
```

---

### ç¬¬ä¸‰æ­¥ï¼šå®ç°å‘½ä»¤ç³»ç»Ÿ

**ç›®æ ‡**ï¼šå¤„ç†ç‰¹æ®Šå‘½ä»¤

**ä»»åŠ¡**ï¼š
åœ¨ `main.py` ä¸­å®ç°å‘½ä»¤è§£æ

**æç¤º**ï¼š
```python
def handle_command(assistant, command):
    """å¤„ç†å‘½ä»¤"""
    if command == "/reset":
        assistant.reset()
        print("âœ¨ å¯¹è¯å·²é‡ç½®")
    elif command == "/history":
        assistant.show_history()
    elif command.startswith("/mode"):
        # TODO: è§£æå¹¶åˆ‡æ¢æ¨¡å¼
        pass
    elif command == "/save":
        # TODO: ä¿å­˜å¯¹è¯
        pass
```

---

### ç¬¬å››æ­¥ï¼šæ·»åŠ  Token ç»Ÿè®¡

**ç›®æ ‡**ï¼šå®æ—¶æ˜¾ç¤º Token ä½¿ç”¨

**ä»»åŠ¡**ï¼š
åˆ›å»º `TokenTracker` ç±»

**æç¤º**ï¼š
```python
class TokenTracker:
    def __init__(self):
        self.total_input = 0
        self.total_output = 0

    def track(self, response):
        # TODO: ç´¯è®¡ç»Ÿè®¡
        # TODO: æ˜¾ç¤ºæœ¬æ¬¡ä½¿ç”¨
        pass
```

---

### ç¬¬äº”æ­¥ï¼šå®ç°å¯¹è¯ä¿å­˜

**ç›®æ ‡**ï¼šå°†å¯¹è¯å¯¼å‡ºåˆ°æ–‡ä»¶

**ä»»åŠ¡**ï¼š
å®ç° `save_conversation()` æ–¹æ³•

**æç¤º**ï¼š
```python
def save_conversation(self, filename=None):
    """ä¿å­˜å¯¹è¯åˆ° Markdown æ–‡ä»¶"""
    if filename is None:
        filename = f"data/conversation_{datetime.now():%Y%m%d_%H%M%S}.md"

    # TODO: æ ¼å¼åŒ–å¯¹è¯å†å²
    # TODO: å†™å…¥æ–‡ä»¶
```

---

## æµ‹è¯•æ–¹æ³•

### åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ 1ï¼šå¤šè½®å¯¹è¯
```bash
uv run python src/main.py

ä½ : ä½ å¥½
AI: ä½ å¥½ï¼å¾ˆé«˜å…´è§åˆ°ä½ ...

ä½ : æˆ‘åˆšæ‰è¯´äº†ä»€ä¹ˆï¼Ÿ
AI: ä½ åˆšæ‰è¯´äº†"ä½ å¥½"  # âœ… è®°ä½äº†ä¸Šæ–‡
```

#### æµ‹è¯•ç”¨ä¾‹ 2ï¼šæ¨¡å¼åˆ‡æ¢
```bash
ä½ : /mode tech
AI: å·²åˆ‡æ¢åˆ°æŠ€æœ¯ä¸“å®¶æ¨¡å¼ ğŸ”§

ä½ : ä»€ä¹ˆæ˜¯ Dockerï¼Ÿ
AI: Docker æ˜¯ä¸€ä¸ªå®¹å™¨åŒ–å¹³å°...  # âœ… æŠ€æœ¯é£æ ¼
```

#### æµ‹è¯•ç”¨ä¾‹ 3ï¼šå¯¹è¯ä¿å­˜
```bash
ä½ : /save
AI: å¯¹è¯å·²ä¿å­˜åˆ° data/conversation_20240104_153000.md

# æ£€æŸ¥æ–‡ä»¶
cat data/conversation_*.md
```

---

## å®Œæˆæ ‡å‡†

### âœ… åŸºç¡€ç‰ˆï¼ˆ60 åˆ†ï¼‰
- [ ] æ”¯æŒå¤šè½®å¯¹è¯ï¼ˆè®°ä½ä¸Šä¸‹æ–‡ï¼‰
- [ ] è‡³å°‘ 2 ç§æ¨¡å¼å¯åˆ‡æ¢
- [ ] åŸºæœ¬å‘½ä»¤å¯ç”¨ï¼ˆ/reset, /helpï¼‰

### âœ… è‰¯å¥½ç‰ˆï¼ˆ80 åˆ†ï¼‰
- [ ] åŸºç¡€ç‰ˆæ‰€æœ‰è¦æ±‚
- [ ] 3 ç§æ¨¡å¼å®Œæ•´å®ç°
- [ ] Token ç»Ÿè®¡åŠŸèƒ½
- [ ] å¯¹è¯å†å²é•¿åº¦ç®¡ç†

### âœ… ä¼˜ç§€ç‰ˆï¼ˆ100 åˆ†ï¼‰
- [ ] è‰¯å¥½ç‰ˆæ‰€æœ‰è¦æ±‚
- [ ] å¯¹è¯ä¿å­˜/åŠ è½½åŠŸèƒ½
- [ ] å®Œæˆè‡³å°‘ 1 ä¸ªè¿›é˜¶åŠŸèƒ½
- [ ] ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“æ‰©å±•

---

## æ‰©å±•æŒ‘æˆ˜

### æŒ‘æˆ˜ 1ï¼šå¯¹è¯æ‘˜è¦
**éš¾åº¦**: ğŸŒŸğŸŒŸğŸŒŸ
**æè¿°**: å½“å¯¹è¯å†å²è¿‡é•¿æ—¶ï¼Œè‡ªåŠ¨ç”Ÿæˆæ‘˜è¦
**æç¤º**: è®© Claude æ€»ç»“å‰ N è½®å¯¹è¯ï¼Œç”¨æ‘˜è¦æ›¿ä»£åŸå§‹å†å²

### æŒ‘æˆ˜ 2ï¼šå¤šä¼šè¯ç®¡ç†
**éš¾åº¦**: ğŸŒŸğŸŒŸğŸŒŸ
**æè¿°**: æ”¯æŒä¿å­˜å’Œåˆ‡æ¢å¤šä¸ªç‹¬ç«‹ä¼šè¯
**æç¤º**: ä½¿ç”¨æ–‡ä»¶æˆ–æ•°æ®åº“å­˜å‚¨å¤šä¸ªä¼šè¯

### æŒ‘æˆ˜ 3ï¼šæ™ºèƒ½å»ºè®®
**éš¾åº¦**: ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ
**æè¿°**: æ ¹æ®å¯¹è¯å†…å®¹ï¼ŒAI ä¸»åŠ¨æå‡ºè¯é¢˜å»ºè®®
**æç¤º**: åˆ†æå¯¹è¯å†å²ï¼Œç”Ÿæˆ 3 ä¸ªå¯èƒ½æ„Ÿå…´è¶£çš„é—®é¢˜

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•è®© AI æ›´æœ‰ä¸ªæ€§ï¼Ÿ
**A**: ä¼˜åŒ– System Promptï¼š
```python
system_prompt = """ä½ æ˜¯ä¸€ä¸ªå‹å¥½çš„ AI åŠ©æ‰‹ï¼Œåå«å°æ™ºã€‚
ä½ çš„ç‰¹ç‚¹ï¼š
- è¯´è¯é£æ ¼è½»æ¾å¹½é»˜
- ç»å¸¸ä½¿ç”¨ emoji
- å›ç­”ç®€æ´æ˜äº†
- å–„äºç”¨ç±»æ¯”è§£é‡Šå¤æ‚æ¦‚å¿µ
"""
```

### Q2: å¯¹è¯å†å²å¤ªé•¿æ€ä¹ˆåŠï¼Ÿ
**A**: å®ç°æ»‘åŠ¨çª—å£ï¼š
```python
if len(self.history) > self.max_history:
    # ä¿ç•™æœ€è¿‘çš„å¯¹è¯
    self.history = self.history[-self.max_history:]
```

### Q3: å¦‚ä½•é¿å… AI "å¤±å¿†"ï¼Ÿ
**A**:
1. å¢åŠ  `max_history` å€¼
2. å®ç°å¯¹è¯æ‘˜è¦åŠŸèƒ½
3. ä½¿ç”¨ Claude çš„ extended context window

---

## å‚è€ƒèµ„æº

- [Module 1 æ–‡æ¡£](../docs/)
- [Project 01 - Hello Agent](../project_01_hello_agent/)
- [Anthropic System Prompts Guide](https://docs.anthropic.com/claude/docs/system-prompts)

---

## ä¸ Project 01 çš„å¯¹æ¯”

| ç‰¹æ€§ | Project 01 | Project 02 |
|------|-----------|-----------|
| å¤æ‚åº¦ | ğŸŒŸ | ğŸŒŸğŸŒŸ |
| å¯¹è¯ç®¡ç† | âŒ | âœ… |
| çŠ¶æ€ç®¡ç† | âŒ | âœ… |
| System Prompt | âŒ | âœ… |
| æ–‡ä»¶æ“ä½œ | âœ… (è¯»å–) | âœ… (è¯»å†™) |
| ä»£ç è¡Œæ•° | ~100 | ~300 |

---

**å‡†å¤‡å¥½æŒ‘æˆ˜æ›´å¤æ‚çš„é¡¹ç›®äº†å—ï¼Ÿå¼€å§‹å§ï¼ğŸš€**
